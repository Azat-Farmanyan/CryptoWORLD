import{a as N,b as _}from"./chunk-IHY3JJ7M.js";import{a as P}from"./chunk-ZVMEFPOU.js";import{d as b,e as x}from"./chunk-PV7LVT4F.js";import{a as V,c as W}from"./chunk-N4FWS2WG.js";import{C as l,Da as L,Ga as I,I as C,J as v,L as S,M as k,N as y,O as w,R as r,S as s,T as d,U as O,W as f,X as a,Y as c,k as p,n as m,o as D,p as h,s as g,sa as M,t as u,wa as E}from"./chunk-3PASIEOY.js";function G(i,t){if(i&1){let n=O();r(0,"app-loading",1),f("onReload",function(){g(n);let o=a();return u(o.getData())}),s()}if(i&2){let n=a();C("errorMessage",n.trendingErrorTxt?n.trendingErrorTxt:n.marketErrorTxt)}}function $(i,t){i&1&&d(0,"app-no-result-found")}var F=(i,t)=>t.id;function A(i,t){if(i&1&&d(0,"app-crypto-card-small",9),i&2){let n=t.$implicit,e=a(3);C("coinData",n)("isLoading",e.trendCoinsLoading)}}function H(i,t){if(i&1&&d(0,"app-crypto-card-small",9),i&2){let n=t.$implicit,e=a(3);C("coinData",n)("isLoading",e.marketCoinsLoading)}}function q(i,t){if(i&1){let n=O();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5)(4,"h3"),c(5,"Trending cryptos"),s(),r(6,"div",6),f("click",function(){g(n);let o=a(2);return u(o.navigate("trending"))}),r(7,"span"),c(8,"See all"),s(),d(9,"img",7),s()(),r(10,"div",8),y(11,A,1,2,"app-crypto-card-small",9,F),s()(),r(13,"div",4)(14,"h3",5)(15,"h3"),c(16,"Markets"),s(),r(17,"div",6),f("click",function(){g(n);let o=a(2);return u(o.navigate("markets"))}),r(18,"span"),c(19,"See all"),s(),d(20,"img",7),s()(),r(21,"div",8),y(22,H,1,2,"app-crypto-card-small",9,F),s()()()()}if(i&2){let n=a(2);l(10),v("grid-template-columns",n.getGridColumnStyles()),l(1),w(n.trendingCoins),l(10),v("grid-template-columns",n.getGridColumnStyles()),l(1),w(n.marketCoins)}}function z(i,t){if(i&1&&S(0,$,1,0,"app-no-result-found")(1,q,24,4),i&2){let n=a();k(0,n.trendingCoins.length===0?0:1)}}var j=(()=>{let t=class t{constructor(){this.trendingService=m(P),this.marketService=m(N),this.windowParamsService=m(V),this.menuParamsService=m(W),this.router=m(L),this.trendingCoins=[],this.marketCoins=[],this.trendingCoinsOriginal=[],this.marketCoinsOriginal=[],this.trendCoinsLoading=!1,this.marketCoinsLoading=!1,this.menuIsOpen=!1,this.trendingErrorTxt="",this.marketErrorTxt="",this.dashboardViewportWidth=0,this.numOfItems=6}ngOnInit(){this.getWindowInnerwidth(),this.getData()}getData(){this.getTrendingCoins(),this.getMarketCoins()}setDataByNumOfItems(e){this.trendingCoins=this.trendingCoinsOriginal.slice(0,e),this.marketCoins=this.marketCoinsOriginal.slice(0,e)}getTrendingCoins(){this.trendCoinsLoading=!0,this.trendingCoinsSubs=this.trendingService.getTrendingCoins(this.numOfItems).subscribe(e=>{this.trendingCoins=e,this.trendingCoinsOriginal=e,console.log(e),this.trendCoinsLoading=!1},e=>{this.trendingErrorTxt=e.message})}getMarketCoins(){this.marketCoinsLoading=!0,this.marketCoinsSubs=this.marketService.getMarketCoins(this.numOfItems).subscribe(e=>{this.marketCoins=e,this.marketCoinsOriginal=e,console.log(e),this.marketCoinsLoading=!1},e=>{this.marketErrorTxt=e.message})}navigate(e){this.router.navigate([e]),this.menuParamsService.setActiveRoute({activeRoute:e,fromMenu:!1})}getWindowInnerwidth(){this.menuIsOpenSubs=this.menuParamsService.menuIsOpen.subscribe(e=>{this.menuIsOpen=e,this.windowWidthSubs=this.windowParamsService.windowWidth.subscribe(o=>{this.menuIsOpen?this.dashboardViewportWidth=o-269:this.dashboardViewportWidth=o-100})})}getGridColumnStyles(){return this.dashboardViewportWidth<=1250&&this.dashboardViewportWidth>800?(this.numOfItems=4,this.setDataByNumOfItems(this.numOfItems),"repeat(2, 1fr)"):this.dashboardViewportWidth<=800?(this.numOfItems=3,this.setDataByNumOfItems(this.numOfItems),"repeat(1, 1fr)"):(this.numOfItems=6,this.setDataByNumOfItems(this.numOfItems),"repeat(3, 1fr)")}ngOnDestroy(){this.menuIsOpenSubs&&this.menuIsOpenSubs.unsubscribe(),this.trendingCoinsSubs&&this.trendingCoinsSubs.unsubscribe(),this.marketCoinsSubs&&this.marketCoinsSubs.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=D({type:t,selectors:[["app-dashboard"]],decls:2,vars:1,consts:[[3,"errorMessage"],[3,"errorMessage","onReload"],[1,"dashboard"],[1,"dashboard-body"],[1,"trending-block"],[1,"block-header"],[3,"click"],["src","../../../../assets/icons/see_all_arrow.svg","alt","see all"],[1,"trending-body"],[3,"coinData","isLoading"]],template:function(o,T){o&1&&S(0,G,1,1,"app-loading",0)(1,z,2,1),o&2&&k(0,T.trendCoinsLoading||T.marketCoinsLoading?0:1)},dependencies:[_,b,x],styles:[".dashboard[_ngcontent-%COMP%]{width:100%}.dashboard[_ngcontent-%COMP%]   .dashboard-body[_ngcontent-%COMP%]   .trending-block[_ngcontent-%COMP%]   .trending-body[_ngcontent-%COMP%]{display:grid;gap:26px;padding-bottom:50px;grid-auto-flow:row;justify-content:space-evenly}"]});let i=t;return i})();var J=[{path:"",component:j}],B=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=h({type:t}),t.\u0275inj=p({imports:[I.forChild(J),I]});let i=t;return i})();var Ct=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=h({type:t}),t.\u0275inj=p({imports:[M,B,_,E,b,x]});let i=t;return i})();export{Ct as DashboardModule};
