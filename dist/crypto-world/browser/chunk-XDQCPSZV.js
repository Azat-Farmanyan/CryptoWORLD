import{a as V,b as l}from"./chunk-IHY3JJ7M.js";import{d as h,e as f}from"./chunk-PV7LVT4F.js";import{a as P,b as F,c as T}from"./chunk-N4FWS2WG.js";import{C as u,Ga as k,I as C,J as x,L as d,M as _,N as S,O as v,P as y,Q as W,R as p,S as c,T as g,U as O,W as I,X as r,Y as L,k as a,n as s,o as b,p as m,s as w,sa as D,t as M}from"./chunk-3PASIEOY.js";function E(e,t){if(e&1){let n=O();p(0,"app-loading",1),I("onReload",function(){w(n);let o=r();return M(o.getMarketCoins())}),c()}if(e&2){let n=r();C("errorMessage",n.errorMessage)}}function $(e,t){e&1&&g(0,"app-no-result-found")}var q=(e,t)=>t.id,z=()=>[l];function A(e,t){if(e&1&&g(0,"app-crypto-card-small",4),e&2){let n=r().$implicit,i=r(3);C("showGraphic",!1)("coinData",n)("isLoading",i.marketCoinsLoading)}}function B(e,t){e&1&&(p(0,"div"),L(1,"Loading ..."),c())}function H(e,t){e&1&&(d(0,A,1,3)(1,B,2,0),y(2,0,z,null,1),W(0,-1))}function J(e,t){if(e&1&&(p(0,"div",2)(1,"div",3),S(2,H,4,0,null,null,q),c()()),e&2){let n=r(2);u(1),x("grid-template-columns",n.getGridColumnStyles()),u(1),v(n.marketCoins)}}function K(e,t){if(e&1&&d(0,$,1,0,"app-no-result-found")(1,J,4,2),e&2){let n=r();_(0,n.marketCoins&&n.marketCoins.length===0?0:1)}}var N=(()=>{let t=class t{constructor(){this.marketService=s(V),this.menuParamsService=s(T),this.windowParamsService=s(P),this.searchService=s(F),this.marketCoins=[],this.originalMarketCoins=[],this.menuIsOpen=!1,this.errorMessage="",this.searchedWord="",this.marketCoinsLoading=!1,this.dashboardViewportWidth=0}ngOnInit(){this.getWindowInnerwidth(),this.getMarketCoins()}getMarketCoins(){this.marketCoinsLoading=!0,this.marketService.getMarketCoins().subscribe(i=>{this.originalMarketCoins=i,this.marketCoins=i,console.log(i),this.marketCoinsLoading=!1,this.searchWordSubs=this.searchService.searchedWord.subscribe(o=>{this.searchedWord=o,this.filterData(o)})},i=>{console.log(i),this.errorMessage=i.message})}filterData(i){i.length===0?this.marketCoins=this.originalMarketCoins:this.marketCoins=this.originalMarketCoins.filter(o=>o?.name.toLowerCase().includes(i.toLowerCase()))}getWindowInnerwidth(){this.menuIsOpenSubs=this.menuParamsService.menuIsOpen.subscribe(i=>{this.menuIsOpen=i,this.windowWidthSubs=this.windowParamsService.windowWidth.subscribe(o=>{this.menuIsOpen?this.dashboardViewportWidth=o-269:this.dashboardViewportWidth=o-100})})}getGridColumnStyles(){return this.dashboardViewportWidth<=1250&&this.dashboardViewportWidth>800?"repeat(2, 1fr)":this.dashboardViewportWidth<=800?"repeat(1, 1fr)":"repeat(3, 1fr)"}ngOnDestroy(){this.marketCoinsSubs&&this.marketCoinsSubs.unsubscribe(),this.menuIsOpenSubs&&this.menuIsOpenSubs.unsubscribe(),this.searchWordSubs&&this.searchWordSubs.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=b({type:t,selectors:[["app-market"]],decls:2,vars:1,consts:[[3,"errorMessage"],[3,"errorMessage","onReload"],[1,"market-block"],[1,"market-body"],[3,"showGraphic","coinData","isLoading"]],template:function(o,R){o&1&&d(0,E,1,1,"app-loading",0)(1,K,2,1),o&2&&_(0,R.marketCoinsLoading?0:1)},dependencies:[h,f],styles:[".market-block[_ngcontent-%COMP%]{width:100%}.market-block[_ngcontent-%COMP%]   .market-body[_ngcontent-%COMP%]{display:grid;gap:26px;padding-bottom:50px;grid-auto-flow:row;justify-content:space-evenly}"]});let e=t;return e})();var Q=[{path:"",component:N}],G=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=m({type:t}),t.\u0275inj=a({imports:[k.forChild(Q),k]});let e=t;return e})();var Ct=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=m({type:t}),t.\u0275inj=a({imports:[D,G,l,h,f]});let e=t;return e})();export{Ct as MarketModule};
